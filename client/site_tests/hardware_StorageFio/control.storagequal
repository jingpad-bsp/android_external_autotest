# Copyright (c) 2013 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

NAME = 'hardware_StorageFio'
AUTHOR = 'jcasse, grundler'
PURPOSE = 'Benchmark storage performance using an unmounted root partition.'
CRITERIA = 'This test is a benchmark.'
SUITE = 'storagequal'
TIME = 'LENGTHY'
TEST_CLASS = 'hardware'
TEST_CATEGORY = 'Performance'
TEST_TYPE = 'client'

DOC = """
This test uses FIO to spawn a number of threads to perform a particular type of
I/O. This test will use block sizes of 4k, 8k, and 16k. It will also attempt
to simulate the disk traffic during a boot, login, and web surfing. It tests
both sequential and random data access.

NOTE: If autoupdate or another program accesses the spare root partition
while this test is running corruption may occur.
"""

job.run_test('hardware_StorageFio',
             constraints=[
                 'seq_read-rd_mean_bw-KB_sec >= 20 * 1024 * 1024',
                 'seq_write-wr_mean_bw-KB_sec >= 15 * 1024 * 1024',
                 '4k_write-wr-IOPS >= 10',
             ])
