# Copyright (c) 2012 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

NAME = 'hardware_StorageFio.stress'
AUTHOR = 'gwendal'
PURPOSE = 'Test the root device, when booted from a USB stick'
TIME = 'LENGTHY'
TEST_TYPE = 'client'
SUITE = 'storagequal'

DOC = """
This test uses FIO to spawn a number of threads to perform a particular type of
I/O. This test will do data integrity checks by first running a workload that
writes data to the spare root partition and then verifying, after 72 hours,
that the data on storage is still valid.

NOTE: If autoupdate or another program accesses the spare root partition
while this test is running, corruption may occur.
"""

job.add_sysinfo_logfile('/var/log/storage_info.txt', on_every_test=True)
job.run_test(url='hardware_StorageFio', filesize=0,
             requirements = [('64k_stress', [])])
